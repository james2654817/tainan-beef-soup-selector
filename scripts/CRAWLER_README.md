# ğŸ•·ï¸ Google Maps çˆ¬èŸ²å·¥å…·

è‡ªå‹•å¾ Google Maps çˆ¬å–å°å—å¸‚ç‰›è‚‰æ¹¯åº—å®¶è³‡è¨Šï¼Œä¸¦æ›´æ–°åˆ°è³‡æ–™åº«ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹è‰²

### âœ… è‡ªå‹•çˆ¬å–
- æœå°‹å°å—å¸‚æ‰€æœ‰ç‰›è‚‰æ¹¯åº—å®¶
- æ”¯æ´å¤šç¨®æœå°‹é—œéµå­—ï¼ˆç‰›è‚‰æ¹¯ã€æº«é«”ç‰›è‚‰æ¹¯ã€ç‰›è‚‰æ¸…æ¹¯ç­‰ï¼‰
- è‡ªå‹•å»é‡ï¼Œé¿å…é‡è¤‡åº—å®¶

### ğŸ“Š å®Œæ•´è³‡è¨Š
- åº—å®¶åç¨±ã€åœ°å€ã€å€åŸŸ
- GPS åº§æ¨™ï¼ˆç¶“ç·¯åº¦ï¼‰
- è©•åˆ†ã€è©•è«–æ•¸é‡
- ç‡Ÿæ¥­æ™‚é–“
- Google Maps é€£çµ
- å°é¢ç…§ç‰‡
- ç‡Ÿæ¥­ç‹€æ…‹ï¼ˆç‡Ÿæ¥­ä¸­/æš«æ™‚æ­‡æ¥­/æ°¸ä¹…æ­‡æ¥­ï¼‰

### ğŸ”„ æ™ºæ…§æ›´æ–°
- **æ–°åº—å®¶**ï¼šè‡ªå‹•åŠ å…¥è³‡æ–™åº«
- **ç¾æœ‰åº—å®¶**ï¼šæ›´æ–°è©•åˆ†ã€è©•è«–ã€ç…§ç‰‡ç­‰è³‡è¨Š
- **æ­‡æ¥­åº—å®¶**ï¼šè‡ªå‹•æª¢æ¸¬ä¸¦ç§»é™¤æ°¸ä¹…æ­‡æ¥­çš„åº—å®¶
- **æš«æ™‚æ­‡æ¥­**ï¼šæ¨™è¨˜ä½†ä¸åˆªé™¤

### ğŸ“ è©•è«–èˆ‡ç…§ç‰‡
- è‡ªå‹•æŠ“å–æœ€æ–°è©•è«–
- ä¸‹è¼‰åº—å®¶ç…§ç‰‡
- é¿å…é‡è¤‡è³‡æ–™

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å–å¾— Google Places API Key

1. å‰å¾€ [Google Cloud Console](https://console.cloud.google.com/)
2. å»ºç«‹æ–°å°ˆæ¡ˆæˆ–é¸æ“‡ç¾æœ‰å°ˆæ¡ˆ
3. å•Ÿç”¨ **Places API**
4. å»ºç«‹ API é‡‘é‘°
5. è¨­å®š API é‡‘é‘°é™åˆ¶ï¼ˆå»ºè­°é™åˆ¶ç‚º Places APIï¼‰

### 2. è¨­å®šç’°å¢ƒè®Šæ•¸

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„çš„ `.env` æª”æ¡ˆä¸­æ·»åŠ ï¼š

```bash
GOOGLE_PLACES_API_KEY=AIzaSy...your_api_key_here
```

### 3. åŸ·è¡Œçˆ¬èŸ²

```bash
# é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd /home/ubuntu/tainan-beef-soup-selector

# åŸ·è¡Œçˆ¬èŸ²
pnpm tsx scripts/crawl_google_maps.ts
```

## ğŸ“‹ åŸ·è¡Œæµç¨‹

```
æ­¥é©Ÿ 1: æœå°‹åº—å®¶
  â”œâ”€ æœå°‹: å°å—å¸‚ ç‰›è‚‰æ¹¯
  â”œâ”€ æœå°‹: å°å— æº«é«”ç‰›è‚‰æ¹¯
  â”œâ”€ æœå°‹: å°å— ç‰›è‚‰æ¸…æ¹¯
  â””â”€ æœå°‹: Tainan beef soup

æ­¥é©Ÿ 2: å–å¾—è©³ç´°è³‡è¨Šä¸¦æ›´æ–°è³‡æ–™åº«
  â”œâ”€ å–å¾—åº—å®¶è©³ç´°è³‡è¨Š
  â”œâ”€ æ–°å¢/æ›´æ–°åº—å®¶è³‡æ–™
  â”œâ”€ æ–°å¢è©•è«–
  â””â”€ æ–°å¢ç…§ç‰‡

æ­¥é©Ÿ 3: æª¢æŸ¥ä¸¦ç§»é™¤æ­‡æ¥­åº—å®¶
  â”œâ”€ æª¢æŸ¥æ‰€æœ‰ç¾æœ‰åº—å®¶
  â”œâ”€ ç§»é™¤æ°¸ä¹…æ­‡æ¥­åº—å®¶
  â””â”€ æ¨™è¨˜æš«æ™‚æ­‡æ¥­åº—å®¶

å®Œæˆï¼
  â”œâ”€ æ–°å¢/æ›´æ–°: X é–“åº—å®¶
  â”œâ”€ ç§»é™¤æ­‡æ¥­: Y é–“åº—å®¶
  â””â”€ è³‡æ–™åº«ç¸½è¨ˆ: Z é–“åº—å®¶
```

## ğŸ”§ é€²éšè¨­å®š

### è‡ªè¨‚æœå°‹é—œéµå­—

ç·¨è¼¯ `crawl_google_maps.ts` ä¸­çš„ `SEARCH_QUERIES`ï¼š

```typescript
const SEARCH_QUERIES = [
  'å°å—å¸‚ ç‰›è‚‰æ¹¯',
  'å°å— æº«é«”ç‰›è‚‰æ¹¯',
  'å°å— ç‰›è‚‰æ¸…æ¹¯',
  'å°å— ç‰›è‚‰ç«é‹',  // æ–°å¢
  'Tainan beef soup'
];
```

### èª¿æ•´ API è«‹æ±‚é–“éš”

é¿å…è¶…é API é™åˆ¶ï¼Œå¯èª¿æ•´ç­‰å¾…æ™‚é–“ï¼š

```typescript
// æœå°‹å¾Œç­‰å¾… 1 ç§’
await new Promise(resolve => setTimeout(resolve, 1000));

// å–å¾—è©³ç´°è³‡è¨Šå¾Œç­‰å¾… 0.5 ç§’
await new Promise(resolve => setTimeout(resolve, 500));
```

## ğŸ“Š è³‡æ–™çµæ§‹

### Stores è¡¨
```typescript
{
  id: string;              // Google Place ID
  name: string;            // åº—å®¶åç¨±
  address: string;         // å®Œæ•´åœ°å€
  district: string;        // å€åŸŸï¼ˆå¦‚ï¼šä¸­è¥¿å€ï¼‰
  lat: string;             // ç·¯åº¦
  lng: string;             // ç¶“åº¦
  rating: number;          // è©•åˆ† (0-5)
  reviewCount: number;     // è©•è«–æ•¸é‡
  openingHours: object[];  // ç‡Ÿæ¥­æ™‚é–“
  googleMapsUrl: string;   // Google Maps é€£çµ
  photoUrl: string;        // å°é¢ç…§ç‰‡
  businessStatus: string;  // ç‡Ÿæ¥­ç‹€æ…‹
}
```

### Reviews è¡¨
```typescript
{
  storeId: string;         // åº—å®¶ ID
  authorName: string;      // è©•è«–è€…åç¨±
  rating: number;          // è©•åˆ†
  text: string;            // è©•è«–å…§å®¹
  time: string;            // è©•è«–æ™‚é–“
}
```

### Photos è¡¨
```typescript
{
  storeId: string;         // åº—å®¶ ID
  url: string;             // ç…§ç‰‡ URL
  photoUrl: string;        // ç…§ç‰‡ URL (å‚™ä»½)
}
```

## â° å®šæœŸåŸ·è¡Œ

### ä½¿ç”¨ Cron Job

```bash
# ç·¨è¼¯ crontab
crontab -e

# æ¯2å¤©å‡Œæ™¨3é»åŸ·è¡Œ
0 3 */2 * * /home/ubuntu/tainan-beef-soup-selector/scripts/schedule_crawler.sh
```

è©³ç´°è¨­å®šè«‹åƒè€ƒ [CRON_SETUP.md](./CRON_SETUP.md)

## ğŸ’° API è²»ç”¨

Google Places API æ”¶è²»æ¨™æº–ï¼ˆ2024ï¼‰ï¼š

- **Text Search**: $32 / 1000 æ¬¡è«‹æ±‚
- **Place Details**: $17 / 1000 æ¬¡è«‹æ±‚
- **Place Photos**: $7 / 1000 æ¬¡è«‹æ±‚

**é ä¼°è²»ç”¨**ï¼ˆæ¯æ¬¡åŸ·è¡Œï¼‰ï¼š
- æœå°‹ 4 æ¬¡ = $0.128
- è©³ç´°è³‡è¨Š 250 æ¬¡ = $4.25
- ç…§ç‰‡ 2500 å¼µ = $17.50
- **ç¸½è¨ˆç´„ $22 / æ¬¡**

ğŸ’¡ **çœéŒ¢æŠ€å·§**ï¼š
1. æ¸›å°‘æœå°‹é—œéµå­—æ•¸é‡
2. é™åˆ¶ç…§ç‰‡æ•¸é‡
3. ä½¿ç”¨ Google Cloud å…è²»é¡åº¦ï¼ˆæ¯æœˆ $200ï¼‰

## ğŸš¨ æ³¨æ„äº‹é …

### API é™åˆ¶
- æ¯æ—¥è«‹æ±‚é…é¡æœ‰é™
- å»ºè­°åœ¨ä½å³°æ™‚æ®µåŸ·è¡Œ
- æ³¨æ„ API è²»ç”¨

### è³‡æ–™å“è³ª
- å®šæœŸæª¢æŸ¥çˆ¬å–çµæœ
- é©—è­‰åº—å®¶è³‡è¨Šæº–ç¢ºæ€§
- è™•ç†ç•°å¸¸è³‡æ–™

### è³‡æ–™åº«å‚™ä»½
- åŸ·è¡Œå‰å»ºè­°å‚™ä»½è³‡æ–™åº«
- ä¿ç•™èˆŠè³‡æ–™ä»¥ä¾¿å›æº¯

## ğŸ› é™¤éŒ¯

### æª¢æŸ¥ API Key

```bash
echo $GOOGLE_PLACES_API_KEY
```

### æŸ¥çœ‹è©³ç´°æ—¥èªŒ

```bash
# åŸ·è¡Œä¸¦é¡¯ç¤ºè©³ç´°è¼¸å‡º
pnpm tsx scripts/crawl_google_maps.ts 2>&1 | tee crawler.log
```

### æ¸¬è©¦å–®ä¸€åº—å®¶

ä¿®æ”¹è…³æœ¬ï¼Œåªè™•ç†ä¸€é–“åº—å®¶é€²è¡Œæ¸¬è©¦ã€‚

## ğŸ“š ç›¸é—œè³‡æº

- [Google Places API æ–‡ä»¶](https://developers.google.com/maps/documentation/places/web-service)
- [Google Cloud Console](https://console.cloud.google.com/)
- [API å®šåƒ¹](https://developers.google.com/maps/billing-and-pricing/pricing)

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue æˆ– Pull Request æ”¹é€²çˆ¬èŸ²åŠŸèƒ½ï¼

## ğŸ“„ æˆæ¬Š

MIT License

